<!-- Content -->
<main class="p-4">
  <!-- Action Bar -->
  <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
      <div>
          <h1 class="text-2xl font-bold text-gray-800">Gesti칩n de Cursos</h1>
          <p class="text-gray-500">Administra todos los cursos de la plataforma</p>
      </div>
      <div class="flex flex-col sm:flex-row gap-3">
          <div class="relative">
              <select class="pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-300 appearance-none bg-white">
                  <option>Todos los cursos</option>
                  <option>Publicados</option>
                  <option>Borradores</option>
                  <option>Archivados</option>
              </select>
              <i class="fas fa-filter absolute left-3 top-2.5 text-gray-400"></i>
          </div>
          <!-- Boton de nuevo curso -->
          <p-button (click)="showDialog()" icon="pi pi-plus-circle" label="Nuevo Curso" />
          <app-modal-curso></app-modal-curso>

      </div>
  </div>

 
  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
      <div class="bg-white p-6 rounded-xl shadow-sm hover-scale">
          <div class="flex justify-between items-start">
              <div>
                  <p class="text-gray-500">Total Cursos</p>
                  <h3 class="text-2xl font-bold mt-2">124</h3>
                  <p class="text-sm text-green-500 mt-1"><i class="fas fa-arrow-up mr-1"></i> 12% este mes</p>
              </div>
              <div class="p-3 rounded-lg bg-orange-100 text-orange-600">
                  <i class="fas fa-book text-xl"></i>
              </div>
          </div>
      </div>

      <div class="bg-white p-6 rounded-xl shadow-sm hover-scale">
          <div class="flex justify-between items-start">
              <div>
                  <p class="text-gray-500">Cursos Activos</p>
                  <h3 class="text-2xl font-bold mt-2">98</h3>
                  <p class="text-sm text-green-500 mt-1"><i class="fas fa-arrow-up mr-1"></i> 5% este mes</p>
              </div>
              <div class="p-3 rounded-lg bg-green-100 text-green-600">
                  <i class="fas fa-check-circle text-xl"></i>
              </div>
          </div>
      </div>

      <div class="bg-white p-6 rounded-xl shadow-sm hover-scale">
          <div class="flex justify-between items-start">
              <div>
                  <p class="text-gray-500">Inscripciones</p>
                  <h3 class="text-2xl font-bold mt-2">3,842</h3>
                  <p class="text-sm text-green-500 mt-1"><i class="fas fa-arrow-up mr-1"></i> 18% este mes</p>
              </div>
              <div class="p-3 rounded-lg bg-blue-100 text-blue-600">
                  <i class="fas fa-user-graduate text-xl"></i>
              </div>
          </div>
      </div>

      <div class="bg-white p-6 rounded-xl shadow-sm hover-scale">
          <div class="flex justify-between items-start">
              <div>
                  <p class="text-gray-500">Valoraci칩n Media</p>
                  <h3 class="text-2xl font-bold mt-2">4.7/5</h3>
                  <p class="text-sm text-green-500 mt-1"><i class="fas fa-arrow-up mr-1"></i> 0.2 este mes</p>
              </div>
              <div class="p-3 rounded-lg bg-yellow-100 text-yellow-600">
                  <i class="fas fa-star text-xl"></i>
              </div>
          </div>
      </div>
  </div>

  <app-tabla-curso></app-tabla-curso>

  <!-- Recent Courses Grid -->
  <div class="mb-6">
      <div class="flex justify-between items-center mb-4">
          <h3 class="font-semibold">Cursos Recientes</h3>
          <button class="text-orange-600 text-sm font-medium">Ver todos</button>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
          <!-- Course Card 1 -->
           @for (curso of cursos; track curso.id) {
            <div class="bg-white rounded-xl shadow-sm overflow-hidden hover-scale course-card">
                   <div class="relative">
                       <img [src]="curso.imagen" [alt]="curso.nombre" class="w-full h-40 object-cover">
                       <div class="absolute top-3 right-3 bg-white rounded-full px-2 py-1 text-xs font-medium text-orange-600">
                           Nuevo
                       </div>
                       <div class="course-actions absolute inset-0 bg-opacity-50 flex items-center justify-center space-x-2">
                           <button class="p-2 bg-white rounded-full text-orange-600 hover:bg-orange-100">
                               <i class="fas fa-edit"></i>
                           </button>
                           <button class="p-2 bg-white rounded-full text-orange-600 hover:bg-orange-100">
                               <i class="fas fa-eye"></i>
                           </button>
                           <button class="p-2 bg-white rounded-full text-red-600 hover:bg-red-100">
                               <i class="fas fa-trash"></i>
                           </button>
                       </div>
                   </div>
                   <div class="p-4">
                       <div class="flex justify-between items-start mb-2">
                           <span class="px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-600">{{ curso.categoria.nombre}}</span>
                           <div class="flex items-center">
                               <i class="fas fa-star text-orange-400 text-xs"></i>
                               <span class="text-xs ml-1">4.8</span>
                           </div>
                       </div>
                       <h4 class="font-semibold mb-1">{{ curso.nombre}}</h4>
                       <p class="text-sm text-gray-500 mb-2">{{ curso.descripcion}}</p>
                       <div class="flex justify-between items-center">
                           <p class="font-bold text-orange-600">S/.{{ curso.precio}}</p>
                           <div class="flex items-center text-sm text-gray-500">
                               <i class="fas fa-users mr-1"></i>
                               <span>45</span>
                           </div>
                       </div>
                   </div>
            </div>
            
           }

          
      </div>
  </div>

  <!-- Categories Section -->
  <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
      <div class="flex justify-between items-center mb-6">
          <h3 class="font-semibold">Categor칤as de Cursos</h3>
          <!-- <button class="text-orange-600 text-sm font-medium">Administrar categor칤as</button> class="text-orange-600 text-sm font-medium" -->
          <!-- boton a qui -->
           <p-button (click)="showDialog()" label="A침adir categor칤as" icon="pi pi-plus-circle"  />
           <app-modal-categoria></app-modal-categoria>

      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">

        @for(categoria of categorias; track categoria.id){
         <div class="p-4 rounded-xl flex flex-col items-center transition cursor-pointer"
                [ngClass]="['bg-' + categoria.color + '-50', 'hover:bg-' + categoria.color + '-100']" >

             <div class="w-12 h-12 rounded-full flex items-center justify-center mb-3"
                [ngClass]="['bg-' + categoria.color + '-100 text-' + categoria.color + '-600']" >
                
                 <!-- <i class="fas text-xl" [ngClass]="categoria.icono"></i> -->
                 <span [ngClass]="categoria.icono" class="text-xl"></span>
             </div>
             <h4 class="font-medium">{{ categoria.nombre}}</h4>
             <p class="text-sm text-gray-500 text-center mt-1">32 cursos</p>
         </div>
        }
        
      </div>
  </div>

  <p-button label="Nueva categor칤a" icon="pi pi-plus" (click)="cancelar()" styleClass="mb-3" />

<!-- 游릱 Tabla con categor칤as -->
<p-table [value]="categorias" [loading]="loading" [paginator]="true" [rows]="5">
  <ng-template pTemplate="header">
    <tr>
      <th>Nombre</th>
      <th>Descripci칩n</th>
      <th>Color</th>
      <th>Icono</th>
      <th>Acciones</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-cat>
    <tr>
      <td>{{ cat.nombre }}</td>
      <td>{{ cat.descripcion }}</td>
      <td>
        <div [style.background]="cat.color" style="width: 20px; height: 20px; border-radius: 50%"></div>
      </td>
      <td><i [class]="'pi pi-' + cat.icono"></i> {{ cat.icono }}</td>
      <td>
        <p-button icon="pi pi-pencil" (click)="editar(cat)" styleClass="p-button-sm p-button-rounded mr-2" />
        <!-- <p-button icon="pi pi-trash" (click)="eliminar(cat.id)" severity="danger" styleClass="p-button-sm p-button-rounded" /> -->
      </td>
    </tr>
  </ng-template>
</p-table>

<!-- 游릴 Di치logo de edici칩n/creaci칩n -->
<p-dialog header="Edit Profile" [modal]="true" [(visible)]="visible" [style]="{ width: '25rem' }">
  <form [formGroup]="form()">
    <div class="p-fluid">
      <div class="p-field">
        <label for="nombre">Nombre</label>
        <input pInputText id="nombre" formControlName="nombre" />
      </div>

      <div class="p-field">
        <label for="descripcion">Descripci칩n</label>
        <input pInputText id="descripcion" formControlName="descripcion" />
      </div>

      <div class="p-field">
        <label for="color">Color</label>
        <p-colorPicker id="color" formControlName="color" format="hex" />
      </div>

      <div class="p-field">
        <label for="icono">Icono</label>
        <input pInputText id="icono" formControlName="icono" placeholder="ej: star, heart, tag" />
      </div>
    </div>
  </form>

  <ng-template pTemplate="footer">
    <!-- <p-button label="Guardar" icon="pi pi-check" (click)="guardar()" [disabled]="!formValido()" /> -->
    <p-button label="Cancelar" icon="pi pi-times" (click)="cancelar()" severity="secondary" />
  </ng-template>
</p-dialog>


  
</main>
