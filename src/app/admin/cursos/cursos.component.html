<!-- Content -->
<main class="p-4">
  <!-- Action Bar -->
  <div
    class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4"
  >
    <div>
      <h1 class="text-2xl font-bold text-gray-800">Gestión de Cursos</h1>
      <p class="text-gray-500">Administra todos los cursos de la plataforma</p>
    </div>
    <div class="flex flex-col sm:flex-row gap-3">
      <div class="relative">
        <select
          class="pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-300 appearance-none bg-white"
        >
          <option>Todos los cursos</option>
          <option>Publicados</option>
          <option>Borradores</option>
          <option>Archivados</option>
        </select>
        <i class="fas fa-filter absolute left-3 top-2.5 text-gray-400"></i>
      </div>
      <!-- Boton de crear nuevo curso -->
      <p-button  icon="pi pi-plus-circle" label="Nuevo Curso" (click)="abrirModalCrearCurso()"/>
      
      <app-modal-curso 
        [(visible)]="visibleModalCurso"
        (visibleChange)="cerrarModalCurso()"
        [cursoSeleccionado]="cursoSeleccionado"
        (cursoGuardado)="onCursoGuardado()"
      
      ></app-modal-curso>

      <!-- <p-button  icon="pi pi-plus-circle" label="Nuevo Modulo" (click)="abrirModalCrearModulo()"/> -->

      <!-- Modal de Módulos -->
        

      <!-- <app-modal-modulo 
        [(visible)]="visibleModalModulo"
        (visibleChange)="cerrarModalModulo()"
        [moduloSeleccionado]="moduloSeleccionado"
        (moduloGuardado)="onModuloGuardado()"
      ></app-modal-modulo> -->

      <!-- <p-button  icon="pi pi-plus-circle" label="Nuevo Tema" (click)="abrirModalCrearTema()"/>

      <app-modal-tema 
        [(visible)]="visibleModalTema"
        (visibleChange)="cerrarModalTema()"
        [temaSeleccionado]="temaSeleccionado"
        (temaGuardado)="onTemaGuardado()"
      ></app-modal-tema> -->
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
    <div class="bg-white p-6 rounded-xl shadow-sm hover-scale">
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-500">Total Cursos</p>
          <h3 class="text-2xl font-bold mt-2">124</h3>
          <p class="text-sm text-green-500 mt-1">
            <i class="fas fa-arrow-up mr-1"></i> 12% este mes
          </p>
        </div>
        <div class="p-3 rounded-lg bg-orange-100 text-orange-600">
          <i class="fas fa-book text-xl"></i>
        </div>
      </div>
    </div>

    <div class="bg-white p-6 rounded-xl shadow-sm hover-scale">
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-500">Cursos Activos</p>
          <h3 class="text-2xl font-bold mt-2">98</h3>
          <p class="text-sm text-green-500 mt-1">
            <i class="fas fa-arrow-up mr-1"></i> 5% este mes
          </p>
        </div>
        <div class="p-3 rounded-lg bg-green-100 text-green-600">
          <i class="fas fa-check-circle text-xl"></i>
        </div>
      </div>
    </div>

    <div class="bg-white p-6 rounded-xl shadow-sm hover-scale">
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-500">Inscripciones</p>
          <h3 class="text-2xl font-bold mt-2">3,842</h3>
          <p class="text-sm text-green-500 mt-1">
            <i class="fas fa-arrow-up mr-1"></i> 18% este mes
          </p>
        </div>
        <div class="p-3 rounded-lg bg-blue-100 text-blue-600">
          <i class="fas fa-user-graduate text-xl"></i>
        </div>
      </div>
    </div>

    <div class="bg-white p-6 rounded-xl shadow-sm hover-scale">
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-500">Valoración Media</p>
          <h3 class="text-2xl font-bold mt-2">4.7/5</h3>
          <p class="text-sm text-green-500 mt-1">
            <i class="fas fa-arrow-up mr-1"></i> 0.2 este mes
          </p>
        </div>
        <div class="p-3 rounded-lg bg-yellow-100 text-yellow-600">
          <i class="fas fa-star text-xl"></i>
        </div>
      </div>
    </div>
  </div>

  <app-tabla-curso></app-tabla-curso>

  <!-- Recent Courses Grid -->
  <div class="mb-6">
    <div class="flex justify-between items-center mb-4">
      <h3 class="font-semibold">Cursos Recientes</h3>
      <!-- <button class="text-orange-600 text-sm font-medium">Ver todos</button> -->
    </div>

    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
    >
      <!-- Course Card 1 -->
      @for (curso of cursos; track curso.id) {
      <div
        class="bg-white rounded-xl shadow-sm overflow-hidden hover-scale course-card"
      >
        <div class="relative">
          <img
            [src]="curso.imagen"
            [alt]="curso.nombre"
            class="w-full h-40 object-cover"
          />
          <div
            class="absolute top-3 right-3 bg-white rounded-full px-2 py-1 text-xs font-medium text-orange-600"
          >
            Nuevo
          </div>
          <div
            class="course-actions absolute inset-0 bg-opacity-50 flex items-center justify-center space-x-2"
          >
            <button
              class="p-2 bg-white rounded-full text-orange-600 hover:bg-orange-100"
            >
              <i class="fas fa-edit"></i>
            </button>
            <button
              class="p-2 bg-white rounded-full text-orange-600 hover:bg-orange-100"
            >
              <i class="fas fa-eye"></i>
            </button>
            <button
              class="p-2 bg-white rounded-full text-red-600 hover:bg-red-100"
            >
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
        <div class="p-4">
          <div class="flex justify-between items-start mb-2">
            <span
              class="px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-600"
              >{{ curso.categoria.nombre }}</span
            >
            <div class="flex items-center">
              <i class="fas fa-star text-orange-400 text-xs"></i>
              <span class="text-xs ml-1">4.8</span>
            </div>
          </div>
          <h4 class="font-semibold mb-1">{{ curso.nombre }}</h4>
          <p class="text-sm text-gray-500 mb-2">{{ curso.descripcion }}</p>
          <div class="flex justify-between items-center">
            <p class="font-bold text-orange-600">S/.{{ curso.precio }}</p>
            <div class="flex items-center text-sm text-gray-500">
              <i class="fas fa-users mr-1"></i>
              <span>45</span>
            </div>
          </div>
        </div>
      </div>

      }
    </div>
  </div>

  <!-- Categories Section -->
  <app-modal-categoria
    [(visible)]="visibleModal"
    (visibleChange)="cerrarModal()"
    [categoriaSeleccionada]="categoriaSeleccionada"
    (categoriaGuardada)="onCategoriaGuardada()"
  ></app-modal-categoria>

  <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
    <div class="flex justify-between items-center mb-6">
      <div>
        <h3 class="font-semibold">Categorías de Cursos</h3>
      </div>
      <div>
        <p-button
          (click)="abrirModalCrear()"
          label="Añadir categorías"
          icon="pi pi-plus-circle"
        />
        <!-- <app-modal-categoria  ></app-modal-categoria> -->
      </div>
      <!-- <button class="text-orange-600 text-sm font-medium">Administrar categorías</button> class="text-orange-600 text-sm font-medium" -->
      <!-- boton a qui -->
    </div>

    <p-toast />
    <p-confirmDialog />
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
      @for(categoria of categorias; track categoria.id){
      <div class="p-4  bg-gray-50 rounded-xl flex flex-col items-center hover:bg-gray-100 transition cursor-pointer">
        <div class="w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 mb-3" >
          <!-- <i class="fas text-xl" [ngClass]="categoria.icono"></i> -->
          <span [ngClass]="categoria.icono" class="text-xl"></span>
        </div>
        <h4 class="font-medium">{{ categoria.nombre }}</h4>
        <p class="text-sm text-gray-500 text-center mt-1">
          {{ categoria._count.cursos }} Cursos
        </p>
        <button
          pButton
          type="button"
          label="Editar"
          class="p-button-outlined p-button-sm mt-2"
          (click)="abrirModalEditar(categoria)"
        ></button>

        <button
          pButton
          type="button"
          label="Eliminar"
          icon="pi pi-trash"
          class="p-button-danger p-button-sm mt-2 ml-2"
          (click)="eliminarCategoria(categoria.id)"
        ></button>
  
      </div>
      }
    </div>
  </div>

  
</main>
